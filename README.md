#Модуль для Битрикс «Перегруппировка»
##Оглавение
* [Тезаурус](#Тезаурус)
* [Описание](#Описание)
* [Настройка](#Настройка)
	* [Вкладка «Настройки»]()
	* [Вкладка правила]()
* [Требования](#Требования)
* [Тезаурус](#Тезаурус)

##Тезаурус
<b>Системные группы</b> &mdash; группы пользователей главного модуля Битрикс. Настраиваются в административной части на вкладке «Настройки» -> «Пользователи» -> «Группы пользователей».
 		
<b>Рабочие группы</b> &mdash; группы социальной сети корпоративного портала. Настраиваются в публичной части в разделе «Группы».		
##Описание
Возможности модуля «Перегруппировка»:

* Создание правил для автоматического включения и исключения пользователей из рабочих групп при изменении их системных групп;
* Обновление рабочих группы пользователей, которые которые находились в целевых системных группах до установки модуля. В этом случае работает часть правил на вступление в системную группу;
* Разрешение или запрет подключения диска рабочей группы при вступлении в нее;
* Возможность запрета исключения пользователя из рабочей группы, если он её модератор.

##Настройка
После установки модуля, его настройки доступны в административной части сайта. Вкладка «Настройки» -> «Настройки продукта» -> "Настройки модулей» -> «Перегруппировка».
###Вкладка «Настройки»
На этой вкладке доступны глобальные настройки:
####&mdash; Оставлять пользователя в рабочей группе, если он модератор
При срабатывание правила на исключение пользователя из рабочей группы, он будет осталвен в ней, если является ее модератором.
####&mdash; Подключать диск группы к диску пользователя
При срабатывании правила на включение пользователя в рабочую грппу, ее диск так же будет подключен.
####&mdash; Кнопка «Обновить для всех»
При нажатии на эту кнопку запускаются все существующие активные правила в части «При присоединении к системной группе и обновлении». Применяет существующие правила на пользователей, которые уже находились в целевых системных группах до установки и настроки «Перегруппировки».
####&mdash; Кнопка «Создать новое правило»
Создаёт новое правило.
###Вкладка правила
Здесь можно настроить в какие рабочие группы будет включаться и из каких исключаться пользователь как при присоединении к системной группе, так и выходе из нее.
####Раздел «Общие»
Здесь находятся общие настройки для правила
#####&mdash; Название правила
Здесь можно задать название вкладки с правилом.
#####&mdash; Включено
Включено правило или нет.
#####&mdash; Применяется к группе
При присоединении/исключении из какой системной группы будет срабатывать правило.
####Раздел «При присоединении к системной группе и обновлении»
Здесь находятся настройки, которые срабатывают при присоединении пользователя к системной группе правила.

Сначала срабатывает правило на присоединение к рабочим группам, потом - на выход из них.
#####&mdash; Рабочие группы, к которым присоединяется пользователь
Можно выбрать одну или несколько рабочих групп, к которым присоедениться пользователь после его присоединения к системной группе правила.
#####&mdash; Рабочие группы, из которых выходит пользователь:
Можно выбрать одну или несколько рабочих групп, из которых выйдет пользователь после его выхода из системной группе правила.
####Раздел «При выходе из системной группы»
Здесь всё аналогично предыдущему разделу, за исключением того, что сначала срабатывает правило выхода из рабочих групп, а потом - присоединения.
####Раздел «Удалить правило»
Здесь находится кнопка удаления правила.
##Требования 
Для работы модуля необходим php версии 5.4 или выше и установленный модуль [Констуктор административной части](https://github.com/pavelshulaev/fadmin)

Модуль предназначен для коробочной версии Битрикс редакции «Корпоративный портал» и «Холдинг».
##Контакты
По всем вопросам вы можете связаться со мной по email: rover.webdev@gmail.com, либо через форму на сайте http://rover-it.me. Гитхаб проекта: https://github.com/pavelshulaev/regroup